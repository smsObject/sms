<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hbh.sms.dal.dao.UserInfoMapper">
    <resultMap id="BaseResultMap" type="com.hbh.sms.model.entity.UserInfo">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="id_no" property="idNo"/>
        <result column="phone" property="phone"/>
        <result column="pay_type" property="payType"/>
        <result column="user_type" property="userType"/>
        <result column="buy_type" property="buyType"/>
        <result column="address" property="address"/>
        <result column="mobill_phone" property="mobilPhone"/>
        <result column="fix_time" property="fixTime"/>
        <result column="opening_time" property="openingTime"/>
        <result column="basic_allowance" property="basicAllowance"/>
        <result column="remaining_balance" property="remainingBalance"/>
        <result column="status" property="status"/>
        <result column="remarks" property="remarks"/>
        <result column="create_person" property="createPerson"/>
        <result column="create_time" property="createTime"/>
        <result column="update_person" property="updatePerson"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>
    <sql id="Base_Column_List">
    id, name, id_no, phone, pay_type,user_type,buy_type,address,mobill_phone,fix_time,
    remarks, create_person, create_time, update_person, update_time,opening_time,basic_allowance,
    remaining_balance,status
  </sql>

    <sql id="queryWhere">
        where 1 = 1
        <if test="id != null">
          AND id = #{id}
        </if>
    </sql>

    <select id="query" resultMap="BaseResultMap" parameterType="com.hbh.sms.model.entity.UserInfo">
        SELECT
        <include refid="Base_Column_List"/>
        FROM t_user_info
        <include refid="queryWhere"/>
    </select>
    
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        DELETE
        FROM t_user_info
        WHERE id = #{id}
    </delete>

    <insert id="insert" parameterType="com.hbh.sms.model.entity.UserInfo">
        <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into t_user_info (
        name, id_no, phone, pay_type,user_type,buy_type,
        address,mobill_phone,fix_time, remarks, create_person,
        create_time, update_person, update_time,opening_time,
        basic_allowance,remaining_balance,status
        )
        values (#{name}, #{idNo}, #{phone}, #{payType},#{userType},#{buyType},
        #{address},#{mobilPhone},#{fixTime}, #{remarks}, #{createPerson},
        now(), #{createPerson}, now(),#{openingTime},
        #{basicAllowance},#{remainingBalance},#{status})
    </insert>

    <update id="updateByPrimaryKey" parameterType="com.hbh.sms.model.entity.UserInfo">
      update  t_user_info
         set  name = #{name},
              id_no = #{idNo},
              phone = #{phone},
              pay_type = #{payType},
              user_type = #{userType},
              buy_type = #{buyType},
              address = #{address},
              mobill_phone = #{mobilPhone},
              fix_time = #{fixTime},
              basic_allowance = #{basicAllowance},
              remaining_balance = #{remainingBalance},
              status = #{status},
              remarks = #{remarks},
              update_person = #{updatePerson},
              update_time = #{updateTime}
       where  id = #{id}
  </update>
</mapper>